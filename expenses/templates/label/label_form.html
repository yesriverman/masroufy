{% extends 'base.html' %}
{% block title %}{{ title }}{% endblock %}
{% block content %}






<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-6">
  <div class="card shadow-sm">
    <div class="card-header text-white text-center" >
      <h5 class="mb-0">{{ title }}</h5>
    </div>
    <div class="card-body">
      <form method="post" novalidate>
        {% csrf_token %}
        {{ form.non_field_errors }}

        <div class="mb-3">
          <label for="id_group" class="form-label">🗂️ المجموعة</label>
          {{ form.group }}
          {% for error in form.group.errors %}
            <div class="invalid-feedback d-block">{{ error }}</div>
          {% endfor %}
        </div>
        
        <div class="mb-3">
          <label for="id_name" class="form-label">🏷️ اسم التسمية</label>
          {{ form.name }}
          {% for error in form.name.errors %}
            <div class="invalid-feedback d-block">{{ error }}</div>
          {% endfor %}
        </div>

        <div class="mb-3">
          <label for="id_expected_monthly" class="form-label">💰 المبلغ المتوقع شهرياً</label>
          {{ form.expected_monthly }}
          {% for error in form.expected_monthly.errors %}
            <div class="invalid-feedback d-block">{{ error }}</div>
          {% endfor %}
        </div>
        
  {% if next %}
    <input type="hidden" name="next" value="{{ next }}">
  {% endif %}

        <button type="submit" class="btn btn-primary">💾 حفظ</button>
        <a href="{% url 'label_list' %}" class="btn btn-secondary ms-2">🔙 رجوع</a>
      </form>
    </div>
  </div>

  {% if deleted_labels %}
  <div class="card mt-4 shadow-sm">
    <div class="card-header bg-secondary text-white text-center">
      <h6 class="mb-0">🗂️ استعادة التسميات المحذوفة</h6>
    </div>
    <div class="card-body">
      <ul class="list-group">
        {% for label in deleted_labels %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ label.name }}
          <a href="{% url 'label_restore_view' label.id %}" class="btn btn-sm btn-outline-success">استعادة</a>
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}
</div>

{% comment %} 
<script>
  document.addEventListener('DOMContentLoaded', function () {
    new TomSelect('#id_group', {
      maxOptions: 10,
      dropdownClass: 'dropdown-menu',
      controlInput: '<input>',
      render: {
        option: function(data, escape) {
          return `<div class="text-truncate">${escape(data.text)}</div>`;
        }
      }
    });
  });
</script>
 {% endcomment %}

{% comment %} <script>
  document.addEventListener('DOMContentLoaded', function () {
    const selects = document.querySelectorAll('.select2');
    selects.forEach(select => {
      $(select).select2({
        width: '40%',
        dir: 'rtl',
        dropdownAutoWidth: true,
        minimumResultsForSearch: Infinity  // disables search if not needed
      });
    });
  });
</script> {% endcomment %}






{% endblock %}
