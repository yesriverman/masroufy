{% extends 'base.html' %}
{% load static %}
{% block title %}{{ form.instance.pk|yesno:"✏️ تعديل دخل,➕ إضافة دخل" }}{% endblock %}
{% block content %}

<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header text-white text-center" >
      <h5 class="mb-0">{% if form.instance.pk %}✏️ تعديل دخل{% else %}➕ إضافة دخل{% endif %}</h5>
    </div>
    <div class="card-body">
      <form method="post" novalidate>
        {% csrf_token %}
        {{ form.non_field_errors }}


<div class="mb-3 d-flex align-items-center">
  <label for="id_amount" class="form-label me-3" style="min-width: 100px;">💰 المبلغ</label>
  <div class="flex-grow-1">
    {{ form.amount }}
    {% for error in form.amount.errors %}
      <div class="invalid-feedback d-block">{{ error }}</div>
    {% endfor %}
  </div>
</div>

<div class="mb-3 d-flex align-items-center">
  <label for="id_date" class="form-label me-3" style="min-width: 100px;">📅 التاريخ</label>
  <div class="flex-grow-1">
    {{ form.date }}
    {% for error in form.date.errors %}
      <div class="invalid-feedback d-block">{{ error }}</div>
    {% endfor %}
  </div>
</div>

  {% if next %}
    <input type="hidden" name="next" value="{{ next }}">
  {% endif %}

        <button type="submit" class="btn btn-success">💾 حفظ</button>
        <a href="{% url 'income_list' %}" class="btn btn-secondary ms-2">↩️ إلغاء</a>
      </form>
    </div>
  </div>
</div>



<script>
  document.addEventListener('DOMContentLoaded', function () {
    new TomSelect('#id_group', {
      maxOptions: 10,
      dropdownClass: 'dropdown-menu',
      controlInput: '<input>',
      render: {
        option: function(data, escape) {
          return `<div class="text-truncate">${escape(data.text)}</div>`;
        }
      }
    });
  });
</script>



{% endblock %}
