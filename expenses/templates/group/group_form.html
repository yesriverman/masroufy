{% extends 'base.html' %}
{% block title %}إضافة / تعديل مجموعة{% endblock %}
{% block content %}

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-6">





  <div class="card shadow-sm">
    <div class="card-header text-white text-center" >
      <h5 class="mb-0">{% if form.instance.pk %}✏️ تعديل المجموعة{% else %}➕ إضافة مجموعة{% endif %}</h5>
    </div>
    <div class="card-body">
      <form method="post" novalidate>
        {% csrf_token %}
        {{ form.non_field_errors }}

        <div class="mb-3">
          <label for="id_name" class="form-label">اسم المجموعة</label>
          {{ form.name }}
          {% for error in form.name.errors %}
            <div class="invalid-feedback d-block">{{ error }}</div>
          {% endfor %}
        </div>

          {% if next_url %}
            <input type="hidden" name="next" value="{{ next_url }}">
          {% endif %}




{% if group.protected %}
  <div class="alert alert-warning mt-2">
    ⚠️ هذه المجموعة محمية ولا يمكن تعديل اسمها أو حذفها.
  </div>
{% endif %}

          <button type="submit" class="btn btn-primary">💾 حفظ</button>
        <a href="{% url 'group_list' %}" class="btn btn-secondary ms-2">↩️ الرجوع</a>
      </form>
    </div>
  </div>

  {% if deleted_groups %}
  <div class="card mt-4 shadow-sm">
    <div class="card-header bg-secondary text-white text-center">
      <h6 class="mb-0">🗂️ استعادة المجموعات المحذوفة</h6>
    </div>
    <div class="card-body">
      <ul class="list-group">
        {% for group in deleted_groups %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ group.name }}
          <a href="{% url 'group_restore_view' group.id %}" class="btn btn-sm btn-outline-success">استعادة</a>
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}
</div>

{% endblock %}
